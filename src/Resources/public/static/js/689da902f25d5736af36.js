"use strict";(window["webpackJsonpPluginareanet-google-fonts-loader"]=window["webpackJsonpPluginareanet-google-fonts-loader"]||[]).push([[613],{613:function(e,n,t){t.r(n),t.d(n,{default:function(){return a}});let{Criteria:s}=Shopware.Data;var a={template:'\n{% block google_font_sales_channel_selection %}\n<sw-multi-select\n    v-model:value="salesChannelIds"\n    v-bind="$attrs"\n    :options="salesChannels"\n    value-property="id"\n    label-property="name"\n>\n    {% block google_font_sales_channel_selection_label %}\n    <template #selection-label-property="{ item }">\n        {{ item.name || item.translated.name }}\n    </template>\n    {% endblock %}\n\n    {% block google_font_sales_channel_selection_result_label %}\n    <template #result-label-property="{ item }">\n        {{ item.name || item.translated.name }}\n    </template>\n    {% endblock %}\n</sw-multi-select>\n{% endblock %}\n',inject:["repositoryFactory"],props:{font:{type:Object,required:!1,default:null}},data(){return{salesChannels:[],sortBy:"name"}},computed:{salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},areanetGoogleFontSalesChannelRepository(){return this.font?this.repositoryFactory.create(this.font.salesChannels.entity,this.font.salesChannels.source):null},salesChannelIds:{get(){return this.font&&this.font.salesChannels?this.font.salesChannels.map(e=>e.salesChannelId):[]},set(e){e=e||[];let{deleted:n,added:t}=this.getChangeset(e);if(this.font.isNew()){this.handleLocalMode(n,t);return}this.handleWithRepository(n,t)}},salesChannelCriteria(){let e=new s(1,500);return e.addSorting(s.sort(this.sortBy,this.sortDirection,this.naturalSorting)),e}},created(){this.createdComponent()},methods:{createdComponent(){this.salesChannelRepository.search(this.salesChannelCriteria).then(e=>{this.salesChannels=e})},getChangeset(e){let n=[],t=[];return e.forEach(e=>{this.font.salesChannels.find(n=>n.salesChannelId===e)||t.push(e)}),this.font.salesChannels.forEach(t=>{e.includes(t.salesChannelId)||n.push(t.salesChannelId)}),{deleted:n,added:t}},getAssociationBySalesChannelId(e){return this.font.salesChannels.find(n=>n.salesChannelId===e)},handleLocalMode(e,n){e.forEach(e=>{let n=this.getAssociationBySalesChannelId(e);this.font.salesChannels.remove(n.id)}),n.forEach(e=>{let n=this.areanetGoogleFontSalesChannelRepository.create(this.font.salesChannels.context);n.salesChannelId=e,n.fontId=this.font.id,n.priority=1,this.font.salesChannels.add(n)})},handleWithRepository(e,n){e.forEach(e=>{let n=this.getAssociationBySalesChannelId(e);this.font.salesChannels.remove(n.id)}),n.forEach(e=>{let n=this.areanetGoogleFontSalesChannelRepository.create(this.font.salesChannels.context);n.salesChannelId=e,n.fontId=this.font.id,this.font.salesChannels.add(n)})}}}}}]);